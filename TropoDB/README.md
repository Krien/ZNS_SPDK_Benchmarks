# TropoDB benchmarks

This directory contains the benchmark data used in the thesis report of TropoDB, see [zns_tests](https://github.com/Krien/TropoDB/tree/master/implementation/rocksdb/zns_tests).
The current repository does not contain the benchmarks itself.

## Data

Data can be generated by following the instructions in TropoDBs directory.
Notably, data extraction for the plots is not done automatically, but manually.
`transform_resetdata_zones_to_JSON.sh` is used to generate json files from the `_BPF` file in `.data/db/` and the `_heat` data in `./data/heat/`. The heat data requires an extra argument `tropodb`.
For example:

```bash
# BPF data
./transform_BPF_zones_to_JSON.sh ./data/db/long_fillrandom_f2fs_BPF > \
    ./data/heat/resets_f2fs_fillrandom.json 
# TropoDB data
./transform_BPF_zones_to_JSON.sh ./data/heat/heat_tropodb_filloverwrite tropodb > \
    ./data/heat/resets_tropodb_filloverwrite.json
```

## Installing

There are many different installation procedures that are valid for Python3.
I recommend using venv, as this was tested. This can then be used like:

```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

## Generating plots

The data used to generate plots is manually copied to the plots.
This is not because it is impossible to do so, but because the plots are investigative and the data used is in ways that make sense for the current plots.
The plots can be generated with (within the venv environment):

```bash
python3 <plotscript>.py
```
